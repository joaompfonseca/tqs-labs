## Lab 4 - Acceptance testing with web automation (Selenium)

##### Key concepts

- Acceptance tests exercise the user interface of the system, simulate the actions of a real user, and treat the system as a black box.

- **Selenium:** browser automation framework, that provides the WebDriver API (Java).

- **Page Objects Pattern:** tranforms hard to read code generated by Selenium into modules (methods).

### 4.1 - WebDriver starter

##### Setup

1. Install the **Selenium** library and Boni Garcia's **WebDriverManager**.
   
   ```xml
   <dependency>
     <groupId>org.seleniumhq.selenium</groupId>
     <artifactId>selenium-java</artifactId>
     <version>4.8.0</version>
   </dependency>
   <dependency>
     <groupId>io.github.bonigarcia</groupId>
     <artifactId>webdrivermanager</artifactId>
     <version>5.3.2</version>
     <scope>test</scope>
   </dependency>
   ```

2. Install the drivers (recommended method)
   
   1. Import **WebDriverManager**.
      
      ```java
      import io.github.bonigarcia.wdm.WebDriverManager;
      ```
   
   2. Call **setup()**.
      
      ```java
      WebDriverManager.chromedriver().setup();
      WebDriver driver = new ChromeDriver();
      ```

### 4.2 - Selenium IDE recorder

##### Setup

1. Download the addon from [here](https://www.selenium.dev/selenium-ide/).

##### Selenium-Jupiter Extension

Using the anotation **@ExtendWith(SeleniumJupiter.class)**, from `io.github.bonigarcia.seljup`, on the test class, we don't need to explicitly setup, instanciate and quit the web driver. We can just pass the driver as an argument in the test method.

```java
@ExtendWith(SeleniumJupiter.class)
public class HelloSeleniumExtensionTest {
    // ...
    @Test
    void test(ChromeDriver driver) {
        // ...
    }
}
```

### 4.3 - Page Object pattern

Design pattern in Selenium, where **webpages** are represented as **classes**:

- <u>elements</u> (of interest) on the page are defined as <u>variables</u>;

- <u>user interactions</u> (on the page) can then be implemented as <u>methods</u>.

### 4.4 - Docker browsers

To use a browser running in a Docker container, we only need to change the test class (and have Docker installed on our machine, of course). Using this approach, the **WebDriver** will connect to a **remote browser**.

```java
@ExtendWith(SeleniumJupiter.class)
public class HelloSeleniumExtensionTest {
    // ...
    @Test
    void test(@DockerBrowser(type = CHROME) WebDriver driver) {
        // ...
    }
}
```
